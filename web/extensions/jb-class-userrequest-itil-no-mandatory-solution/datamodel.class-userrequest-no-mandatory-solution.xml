<?xml version="1.0" encoding="UTF-8"?>
<itop_design xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.3">

	<classes>
		<class id="UserRequest" _delta="merge"> 
			<lifecycle>
				<states>
						<inherit_flags_from>assigned</inherit_flags_from>
						<flags>
							<attribute id="last_pending_date">
								<read_only/>
							</attribute>
							<attribute id="pending_reason">
								<mandatory/>
								<must_prompt/>
							</attribute>
							<attribute id="ttr_escalation_deadline">
								<hidden/>
							</attribute>
						</flags>
						<transitions>
							<transition id="ev_assign">
								<target>assigned</target>
								<actions>
								</actions>
							</transition>
							<transition id="ev_autoresolve">
								<target>resolved</target>
								<actions>
									<action>
										<verb>SetCurrentDate</verb>
										<params>
											<param xsi:type="attcode">resolution_date</param>
										</params>
									</action>
									<action>
										<verb>SetElapsedTime</verb>
										<params>
											<param xsi:type="attcode">time_spent</param>
											<param xsi:type="attcode">start_date</param>
											<param xsi:type="string">DefaultWorkingTimeComputer</param>
										</params>
									</action>
									<action>
										<verb>ResolveChildTickets</verb>
										<params/>
									</action>
								</actions>
							</transition>
						</transitions>
					</state>
					<state id="resolved" _delta="merge">
						<flags>
							<attribute id="solution" _delta="redefine">
								<must_prompt/>
							</attribute>
						</flags>
							<transition id="ev_close">
								<target>closed</target>
								<actions>
									<action>
										<verb>SetCurrentDate</verb>
										<params>
											<param xsi:type="attcode">close_date</param>
										</params>
									</action>
								</actions>
							</transition>
							<transition id="ev_reopen">
								<target>assigned</target>
								<actions>
								</actions>
							</transition>
							<transition id="ev_autoresolve">
								<target>resolved</target>
								<actions>
									<action>
										<verb>SetCurrentDate</verb>
										<params>
											<param xsi:type="attcode">resolution_date</param>
										</params>
									</action>
									<action>
										<verb>SetElapsedTime</verb>
										<params>
											<param xsi:type="attcode">time_spent</param>
											<param xsi:type="attcode">start_date</param>
											<param xsi:type="string">DefaultWorkingTimeComputer</param>
										</params>
									</action>
									<action>
										<verb>ResolveChildTickets</verb>
										<params/>
									</action>
								</actions>
							</transition>
						</transitions>
					</state>
				</states>
			</lifecycle>
		</class>
	</classes>

</itop_design>

